<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dino Game</title>
  <style>
    body {
      margin: 0;
      background: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    canvas {
      border: 1px solid #ccc;
      background: #fff;
    }
  </style>
</head>
<body>
  <canvas id="game" width="1100" height="600"></canvas>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    const SCREEN_WIDTH = canvas.width;
    const SCREEN_HEIGHT = canvas.height;

    // ========== Load Images ==========
    const images = {
      dinoRun: [new Image(), new Image()],
      dinoJump: new Image(),
      dinoDuck: [new Image(), new Image()],
      smallCactus: [new Image(), new Image(), new Image()],
      largeCactus: [new Image(), new Image(), new Image()],
      bird: [new Image(), new Image()],
      cloud: new Image(),
      bg: new Image()
    };

    images.dinoRun[0].src = "Assets/Dino/DinoRun1.png";
    images.dinoRun[1].src = "Assets/Dino/DinoRun2.png";
    images.dinoJump.src = "Assets/Dino/DinoJump.png";
    images.dinoDuck[0].src = "Assets/Dino/DinoDuck1.png";
    images.dinoDuck[1].src = "Assets/Dino/DinoDuck2.png";

    images.smallCactus[0].src = "Assets/Cactus/SmallCactus1.png";
    images.smallCactus[1].src = "Assets/Cactus/SmallCactus2.png";
    images.smallCactus[2].src = "Assets/Cactus/SmallCactus3.png";

    images.largeCactus[0].src = "Assets/Cactus/LargeCactus1.png";
    images.largeCactus[1].src = "Assets/Cactus/LargeCactus2.png";
    images.largeCactus[2].src = "Assets/Cactus/LargeCactus3.png";

    images.bird[0].src = "Assets/Bird/Bird1.png";
    images.bird[1].src = "Assets/Bird/Bird2.png";

    images.cloud.src = "Assets/Other/Cloud.png";
    images.bg.src = "Assets/Other/Track.png";

    // ========== Scaling Info ==========
    const SCALE = {
      dinoRun: { w: 88, h: 94 },
      dinoJump: { w: 88, h: 94 },
      dinoDuck: { w: 118, h: 60 },
      smallCactus: [
        { w: 40, h: 71 },  // SmallCactus1
        { w: 99, h: 95 },  // SmallCactus2
        { w: 105, h: 71 }  // SmallCactus3
      ],
      largeCactus: [
        { w: 48, h: 95 },  // LargeCactus1
        { w: 99, h: 95 },  // LargeCactus2
        { w: 102, h: 95 }  // LargeCactus3
      ],
      bird: { w: 92, h: 80 },
      cloud: { w: 90, h: 30 },
      bg: { w: 2400, h: 20 }
    };

    // ========== Classes ==========
    class Dinosaur {
      constructor() {
        this.x = 80;
        this.y = 310;
        this.width = SCALE.dinoRun.w;
        this.height = SCALE.dinoRun.h;
        this.duck = false;
        this.jump = false;
        this.stepIndex = 0;
        this.jumpVel = 8.5;
        this.img = images.dinoRun[0];
      }

      update(keys) {
        if (this.jump) {
          this.y -= this.jumpVel * 4;
          this.jumpVel -= 0.8;
          if (this.jumpVel < -8.5) {
            this.jump = false;
            this.jumpVel = 8.5;
          }
        } else if (keys["ArrowUp"]) {
          this.jump = true;
          this.duck = false;
        } else if (keys["ArrowDown"]) {
          this.duck = true;
          this.jump = false;
        } else {
          this.duck = false;
        }

        this.stepIndex++;
        if (this.stepIndex >= 10) this.stepIndex = 0;
      }

      draw() {
        if (this.jump) {
          ctx.drawImage(images.dinoJump, this.x, this.y, SCALE.dinoJump.w, SCALE.dinoJump.h);
        } else if (this.duck) {
          ctx.drawImage(images.dinoDuck[Math.floor(this.stepIndex / 5)], this.x, this.y + 30, SCALE.dinoDuck.w, SCALE.dinoDuck.h);
        } else {
          ctx.drawImage(images.dinoRun[Math.floor(this.stepIndex / 5)], this.x, this.y, SCALE.dinoRun.w, SCALE.dinoRun.h);
        }
      }
    }

    class Cloud {
      constructor() {
        this.x = SCREEN_WIDTH + Math.random() * 1000;
        this.y = 50 + Math.random() * 50;
      }
      update() {
        this.x -= gameSpeed;
        if (this.x < -SCALE.cloud.w) {
          this.x = SCREEN_WIDTH + Math.random() * 2500;
          this.y = 50 + Math.random() * 50;
        }
      }
      draw() {
        ctx.drawImage(images.cloud, this.x, this.y, SCALE.cloud.w, SCALE.cloud.h);
      }
    }

    class Obstacle {
      constructor(imgArr, sizes) {
        this.type = Math.floor(Math.random() * imgArr.length);
        this.img = imgArr[this.type];
        this.size = sizes[this.type];
        this.x = SCREEN_WIDTH;
        this.y = SCREEN_HEIGHT - this.size.h - 75;
      }
      update() {
        this.x -= gameSpeed;
      }
      draw() {
        ctx.drawImage(this.img, this.x, this.y, this.size.w, this.size.h);
      }
    }

    class Bird extends Obstacle {
      constructor() {
        super(images.bird, [SCALE.bird, SCALE.bird]);
        this.y = 250;
        this.index = 0;
      }
      draw() {
        ctx.drawImage(images.bird[Math.floor(this.index / 5)], this.x, this.y, SCALE.bird.w, SCALE.bird.h);
        this.index = (this.index + 1) % 10;
      }
    }

    // ========== Game State ==========
    let gameSpeed = 10;
    let xPosBg = 0;
    let points = 0;
    let player = new Dinosaur();
    let cloud = new Cloud();
    let obstacles = [];
    let keys = {};

    // ========== Score ==========
    function drawScore() {
      ctx.font = "20px Arial";
      ctx.fillStyle = "black";
      ctx.fillText("Points: " + points, 900, 50);
      points++;
      if (points % 100 === 0) gameSpeed++;
    }

    // ========== Background ==========
    function drawBackground() {
      const imgW = SCALE.bg.w;
      ctx.drawImage(images.bg, xPosBg, 380, imgW, SCALE.bg.h);
      ctx.drawImage(images.bg, imgW + xPosBg, 380, imgW, SCALE.bg.h);
      if (xPosBg <= -imgW) xPosBg = 0;
      xPosBg -= gameSpeed;
    }

    // ========== Main Loop ==========
    function loop() {
      ctx.clearRect(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);

      drawBackground();
      cloud.update();
      cloud.draw();

      player.update(keys);
      player.draw();

      if (obstacles.length === 0) {
        const choice = Math.floor(Math.random() * 3);
        if (choice === 0) obstacles.push(new Obstacle(images.smallCactus, SCALE.smallCactus));
        else if (choice === 1) obstacles.push(new Obstacle(images.largeCactus, SCALE.largeCactus));
        else obstacles.push(new Bird());
      }

      obstacles.forEach((obs, i) => {
        obs.update();
        obs.draw();
        if (player.x < obs.x + obs.size?.w && player.x + player.width > obs.x &&
            player.y < obs.y + obs.size?.h && player.y + player.height > obs.y) {
          alert("Game Over! Score: " + points);
          document.location.reload();
        }
        if (obs.x < -100) obstacles.splice(i, 1);
      });

      drawScore();
      requestAnimationFrame(loop);
    }

    // ========== Input ==========
    document.addEventListener("keydown", e => keys[e.key] = true);
    document.addEventListener("keyup", e => keys[e.key] = false);

    // Start
    loop();
  </script>
</body>
</html>


